Feature: View Stock Prediction Generated by Machine Learning Model
  As a trader
  I want to view AI-powered price predictions using Logistic Regression
  So that I can make data-driven investment decisions based on historical price movement patterns

  Background:
    Given I am logged in as a trader
    And the following stocks exist:
      | symbol | name           | price  | available_quantity | sector     | market_cap    | description              |
      | AAPL   | Apple Inc.     | 170.50 | 10000              | Technology | 2800000000000 | A leading tech company.  |
      | GOOGL  | Alphabet Inc.  | 140.25 | 5000               | Technology | 1900000000000 | A tech conglomerate.     |

  @javascript
  Scenario: View price prediction on stock detail page
    Given stock "AAPL" has 30 days of historical price data
    When I visit the stock detail page for "AAPL"
    Then I should see "AI Price Prediction"
    And I should see "Logistic Regression Model"
    And I should see predicted price for next day
    And I should see prediction confidence level

  @javascript
  Scenario: Prediction shows upward trend
    Given stock "AAPL" has increasing price trend over 30 days
    When I visit the stock detail page for "AAPL"
    Then I should see "AI Price Prediction"
    And the predicted price should indicate an upward trend
    And I should see "Confidence" with a percentage

  @javascript
  Scenario: Prediction shows downward trend
    Given stock "GOOGL" has decreasing price trend over 30 days
    When I visit the stock detail page for "GOOGL"
    Then I should see "AI Price Prediction"
    And the predicted price should indicate a downward trend

  @javascript
  Scenario: No prediction when insufficient data
    Given stock "AAPL" has only 2 days of historical data
    When I visit the stock detail page for "AAPL"
    Then I should see "Insufficient data for prediction"
    And I should not see predicted price

  @javascript
  Scenario: Prediction details include accuracy metrics
    Given stock "AAPL" has 30 days of historical price data
    When I visit the stock detail page for "AAPL"
    Then I should see "AI Price Prediction"
    And I should see "Predicted Price" with a dollar amount
    And I should see "Confidence" percentage
    And I should see "Based on" with number of data points

